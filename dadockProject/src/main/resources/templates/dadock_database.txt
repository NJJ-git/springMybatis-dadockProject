//데이터 변경 log//

-- 2022-08-16 -- 
1. dibs 테이블명 wishlist로 변경 (칼럼 이름 함께 변경)
	wishlist 테이블 wishlist boolean 삭제.
2. isbn 데이터 타입 변경 (bigint -> varchar(255))
3. library 테이블 추가 (star 칼럼 확인)
--2022-08-17 --
1. user 테이블 address_detail 칼럼 추가


////////// 테이블 목록 //////////

+------------------+
| Tables_in_dadock |
+------------------+
| comment          |
| dibs             |
| grade            |
| market_board     |
| market_board_img |
| market_reply     |
| pay              |
| read_book        |
| user             |
| user_group       |
+------------------+

////////// 데이터 입력 //////////

drop database dadock;
create database dadock;

drop user 'dadock_user'@'localhost';
create user 'dadock_user'@'localhost' identified with mysql_native_password by '1234';

grant select, insert, delete, update on dadock.* to 'dadock_user'@'localhost';

use dadock;

drop table user;
create table user(
user_id varchar(255),
pw varchar(255),
name varchar(255),
signup datetime default current_timestamp,
email varchar(255),
phone varchar(255),
address varchar(255),
address_detail varchar(255)
level int,
point int,
  primary key(user_id),
  unique(phone),
  unique(email)
);

insert into user (user_id, pw, name, email, phone, level, point)  values 
('test', '1234', '테스트', 'test@gmail.com', '000-0000-0000', '3', '50');


drop table read_book;
create table read_book(
isbn varchar(255),
title varchar(255),
author varchar(255),
img varchar(255),
publisher varchar(255),
pubdate date,
description text,
link varchar(255),
discount int,
star int not null default 0,
 primary key(isbn)
)
ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

insert into read_book (isbn, title, author, img, publisher, pubdate, description, link, discount) values
('9788946421851', '내 생애 단 한 번 (장영희 에세이 | 때론 아프게, 때론 불꽃같이)', '장영희', 'https://shopping-phinf.pstatic.net/main_3248051/32480513418.20220527085451.jpg', '샘터(샘터사)', '20210730', 
'긍정적 삶과 희망, 사랑을 전하는 故 장영희 교수의 첫 번째 에세이집 더 느리게 그러나 더 깊이 세상을 보는 시선 장영희 교수가 처음으로 쓴 우리말 에세이집 《내 생애 단 한 번》이 그녀의 맑고 빛나는 영혼처럼 아름다운 옷으로 갈아입고 새롭게 출간된다. 번역가로 이름을 먼저 알렸으며 문학 에세이 《문학의 숲을 거닐다》와 《생일》, 《축복》으로 ‘문학 전도사’라는 별칭을 얻기도 한 장영희 교수. 그녀가 자신의 삶과 생각들을 섬세하게 풀어놓은 순수 에세이집 《내 생애 단 한 번》과 《살아온 기적 살아갈 기적》도 큰 사랑을 받았다. 이 책 《내 생애 단 한 번》은 월간 〈샘터〉에 연재하면서 이미 수많은 독자들에게 호평을 받았던 글들과 새로운 글들을 묶은 것이다. ‘생명의 소중함’, ‘희망’, ‘신뢰’를 주요 테마로, 생활 곳곳에서 마주치는 편린들을 통해 우리가 결코 잊어서는 안 될 삶의 소중한 가치들을 감동적으로 그리고 있다. ‘올해의 문장상’을 받기도 했던 이 책은 일상에서 건져낸 경쾌하고 참신한 맛의 글들로 하루하루 바쁘게 살아가며 잊고 지냈던 삶의 소중함을 깨닫게 해준다. 계속되는 힘겨운 상황 속에서 희망을 꿈꾸기 어려운 시기를 살아가는 지금 우리에게도 이 책은 세상이 여전히 아름답고 살 만한 곳이라는 것을 일깨워 줄뿐더러 다시 희망을 품을 수 있는 힘을 불어넣어 준다. ‘힘내라. 삶의 한가운데 서서 당당하고 치열하게 살았던 오늘을 떠올리며 살아가는 일이 아름답다고 느낄 그날을 위하여’라고 용기를 북돋아 주는 장영희 교수의 응원이 오늘을 살아갈 힘이 될 것이다.',
'https://search.shopping.naver.com/book/catalog/32480513418', '13500');


drop table user_group;
create table user_group(
user_group_no int auto_increment,
title varchar(255),
content varchar(255),
user_id varchar(255),
level int,
isbn varchar(255),
start_date date,
end_date date,
address varchar(255),
 primary key(user_group_no),
 foreign key(user_id) references user(user_id) on delete cascade on update cascade,
 foreign key(isbn) references read_book(isbn) on delete cascade on update cascade
);

insert into user_group (title, content, user_id, isbn, start_date, end_date) values
( '독서모임', '독서모임 안내...참가비 : 10000원', 'test', '9788946421851', '2022-08-11', '2022-08-26');


drop table grade;
create table grade(
level int,
start_point int,
end_point int,
 primary key(level)
);

insert into grade (level, start_point, end_point) values
('1', '0', '10'),
('2', '11', '30'),
('3', '20', '50');


drop table comment;
create table comment(
comment_no int auto_increment,
user_id varchar(255),
isbn varchar(255),
content varchar(255),
 primary key(comment_no),
 foreign key(user_id) references user(user_id) on delete cascade on update cascade,
 foreign key(isbn) references read_book(isbn) on delete cascade on update cascade
);

insert into comment (comment_no, user_id, isbn, content) values
('1', 'test', '9788946421851', '좋은 책입니다.......?');


drop table market_board;
create table market_board(
market_board_no int auto_increment,
user_id varchar(255),
title varchar(255),
post_time datetime default current_timestamp,
img_path varchar(255),
content text,
book_title varchar(255),
isbn varchar(255),
address varchar(255),
price int,
 primary key(market_board_no),
 foreign key(user_id) references user(user_id) on delete cascade on update cascade,
 foreign key(isbn) references read_book(isbn) on delete cascade on update cascade
);



drop table market_reply;
create table market_reply(
market_reply_no int auto_increment,
contents varchar(255),
post_time datetime default current_timestamp,
market_board_no int,
user_id varchar(255),
 primary key(market_reply_no),
 foreign key(market_board_no) references market_board(market_board_no) on delete cascade on update cascade,
 foreign key(user_id) references user(user_id) on delete cascade on update cascade
);


drop table market_board_img;
create table market_board_img(
market_board_img_no int auto_increment,
market_board_no int,
img_path varchar(255),
 primary key(market_board_img_no),
 foreign key(market_board_no) references market_board(market_board_no) on delete cascade on update cascade
);


drop table dibs;
drop table wishlist;
create table wishlist(
wishlist_no int auto_increment,
market_board_no int,
user_id varchar(255),
 primary key(wishlist_no),
 foreign key(market_board_no) references market_board(market_board_no) on delete cascade on update cascade,
 foreign key(user_id) references user(user_id) on delete cascade on update cascade,
 unique key (market_board_no, user_id)
);


drop table pay;
create table pay(
pay_no int auto_increment,
market_board_no int,
pay_time datetime default current_timestamp,
pay_img_path varchar(255),
book_title varchar(255),
pay_price int,
user_id varchar(255),
address varchar(255),
phone varchar(255),
 primary key(pay_no),
 foreign key(market_board_no) references market_board(market_board_no) on delete cascade on update cascade,
 foreign key(user_id) references user(user_id) on delete cascade on update cascade
);

drop table library;
create table library(
library_no int auto_increment,
isbn varchar(255),
user_id varchar(255),
title varchar(255),
author varchar(255),
publisher varchar(255),
end_date datetime,
star int not null default 0,
 primary key(library_no)
);

commit;
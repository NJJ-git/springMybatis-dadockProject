<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>물건 상세</title>
</head>
<body>
<!-- <header th:insert="headerNav"></header> -->
<header th:insert="headerNav"></header>
<div class="card-group">	
	<div id="box" class="m-3">
       <div class="d-flex flex-row-reverse">
    	   <a th:href="@{/market/goodsDelete/{no}(no=${marketBoard.market_board_no})}" class="btn btn-danger">삭제</a>
	       <a th:href="@{/market/goodsUpdate/{no}(no=${marketBoard.market_board_no})}" class="btn btn-success">수정</a>
       </div>
       <h1 th:text="'No.'+${marketBoard.market_board_no}"> <i class="bi bi-book"></i></h1>
       <h1 th:text="'state.'+${marketBoard.state}"></h1>
     </div>
     <div class="d-flex justify-content-center">
     <div class="card" style="width: 500px;">
     <div>
  		<div th:each="boardImg:${marketBoard.marketBoardImgs}">
  			<img th:src="@{/public/market/img/{fileName}(fileName=${boardImg.img_path})}" class="card-img-top" alt="...">
  		</div>
	  	</div>
	  	<div class="card-body">
	  	제목:
	    <h2 class="card-title mb-3" th:text="${marketBoard.title}"></h2>
	    등록시간:
	    <h5 class="card-title mb-3" th:text="${marketBoard.post_time}"></h5>
	   <!--  책 제목:
	    <h2 class="card-title mb-3" th:text="${marketBoard.book_title}"></h2> -->
	    <p class="card-text mb-3" >상태: 
	    	<button class="btn btn-outline-success" role="button" th:classappend="${(marketBoard.state==1)?'active':''}">최상</button> 
	    	<button class="btn btn-outline-success" role="button" th:classappend="${(marketBoard.state==2)?'active':''}">상</button> 
	    	<button class="btn btn-outline-success" role="button" th:classappend="${(marketBoard.state==3)?'active':''}">중</button> 
	    	</p> 
	    	가격:
	    	<p class="card-text" th:text="${marketBoard.price}" ></p>
	    	설명:
	    <p class="card-text" th:text="${marketBoard.content}"></p>
	    <span class="d-flex flex-row-reverse">
		    <!-- <a th:href="@{/market/wishlist/{no}no=${marketBoard.market_board_no})}" 
		    class="btn btn-primary">
		    <a th:href="@{/market/wishlist/{id}/{no}(id=${marketBoard.user_id},no=${marketBoard.market_board_no})}" 
		    <i class="bi bi-bookmark-heart-fill">
		    	<span ></span>
		    </i>
		    </a> -->
		    <a data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="찜하기"  
		    	th:href="@{/market/wishList}" class="btn btn-outline-warning">
		    	<i class="bi bi-heart"></i></a>
		    <a th:href="@{/market/marketPay/{no}(no=${marketBoard.market_board_no})}" class="btn btn-primary">결제</a>
	    </span>
	  </div>
     </div>
</div>
		 <div>
		 <h2 class="d-flex justify-content-between">
				<span>댓글 리스트
					<small th:text="${marketReplys?.size}"></small>
				</span>
				
			</h2>
			<div class="card  mb-3" style="width: 18rem;">
			  <ul class="list-group list-group-flush">
			  	<li class="list-group-item text-bg-light border-success" >
			  	<form action="/reply/insert.do" method="post">
				  <div class="card-footer">
					댓글등록
				    <input name="title" type="text" class="form-control">
				  </div>
				    
			   		 <p class="mb-1">
						<button type="reset" class="btn btn-sm btn-outline-warning">초기화</button>
						<button type="submit" class="btn btn-sm btn-outline-primary">제출</button>
						<input type="hidden" name="market_board_no" th:value="${marketBoard.market_board_no}">
					</p>
					</form>
					</li>
					
			<th:block  th:each="reply : ${marketBoard.marketReplys}">
		 
		  	<li class="list-group-item">
		  	<form action="/reply/update.do" method="post" >
		  		<p class="input-group input-group-sm mb-1">
						<span class="input-group-text">No</span>
						<input name="market_reply_no" th:value="${reply.market_reply_no}"
							type="text" class="form-control" readonly>
							
						<span class="input-group-text">글쓴이</span>
						<input name="user.user_id" th:value="${reply.user.user_id}"
							type="text" class="form-control" readonly>
					</p>
					<div class="mb-1 d-flex justify-content-between">
						<span>등록일 : <th:block th:text="${#dates.format(reply.post_time,'yyyy-MM-dd HH:mm:ss')}"></th:block></span>
					</div>
					
					<p class="input-group input-group-sm mb-1">
						<span class="input-group-text">내용?</span>
						<textarea name="contents" class="form-control" th:text="${reply.contents}"></textarea>
					</p>
					<p class="mb-1">
						<button type="reset" class="btn btn-sm btn-outline-warning">초기화</button>
						<a th:href="@{/reply/delete/{no}(no=${reply.market_reply_no})}"

							class="btn btn-outline-danger btn-sm">삭제</a>
						<button type="submit" class="btn btn-sm btn-outline-primary">제출</button>
						<input type="hidden" name="board_no" th:value="${board.board_no}">
					</p>
		  	</form>
		  	</li>
		  </th:block>
			  </ul>
		 </div>
</div>
</div>		
</body>
</html>